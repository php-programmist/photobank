{% set isCurrentField = app.request.query.get('sort') == field %}
{% set direction = 'asc' %}
{% if isCurrentField and app.request.query.get('direction') == direction %}
    {% set direction = 'desc' %}
{% endif %}

<a href="{{ app.request.pathinfo }}?sort={{ field }}&direction={{ direction }}">
    <span class="float-right">
    {% if isCurrentField %}
        {% if direction == 'asc' %}
            <i class="fa fa-sort-up"></i>
        {% else %}
            <i class="fa fa-sort-down"></i>
        {% endif %}
    {% else %}
        <i class="fa fa-sort"></i>
    {% endif %}
        </span>
    {{ label }}
</a>