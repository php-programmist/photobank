{% extends 'base.html.twig' %}

{% block title %}Список папок{% endblock %}

{% block body %}
    <h1>Список папок</h1>
    {% if user.validToken %}
        <a class="btn btn-success my-3" href="{{ path('batch_new') }}">Добавить папку</a>
    {% else %}
        <a class="btn btn-success my-3" href="{{ path('yandex_auth') }}">Авторизация в Yandex.Disk</a>
        <p class="alert alert-warning">Внимание! Прежде чем нажать кнопку, убедитесь, что в этом браузере Вы авторизованы как "r-qmotors"</p>
    {% endif %}
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Папка</th>
                <th>Домен</th>
                <th>Дата создания</th>
                <th>Фотографий</th>
            </tr>
        </thead>
        <tbody>
        {% for batch in batches %}
            <tr>
                <td><a href="{{ path('batch_edit', {'id': batch.id}) }}">{{ batch.id }}</a></td>
                <td><a href="{{ path('batch_edit', {'id': batch.id}) }}">{{ batch.folder }}</a></td>
                <td>{{ batch.domain }}</td>
                <td>{{ batch.createdAt ? batch.createdAt|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ batch.photos|length }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">Папки не найдены</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


{% endblock %}
